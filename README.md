# How I Built This:

[Redux Slice Documentation](https://redux-toolkit.js.org/api/createslice)

[Redux Reducers Documentation](https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers)

### 6. Create a new file in the src/features/topics directory and name it topicSlice.js

6a. Is named topics.
```javascript
import { createSlice } from "@reduxjs/toolkit";
export const topicSlice = createSlice({
name: 'topics',
})
```

6b. Has initial state consisting of an object that includes one property, topics, which corresponds to an empty object. This inner topics object will eventually hold all topics keyed by id.
```javascript
import { createSlice } from "@reduxjs/toolkit";
export const topicSlice = createSlice({
name: 'topics',
initialState: {
  topics: {
  // will eventually hold all topics keyed by id.
  }
}
})
```

*6c. Has an addTopic action. You can expect the payload for this action to look like {id: '123456', name: 'name of topic', icon: 'icon url'}. Store these values in the state as a new topic object.
```javascript
import { createSlice } from "@reduxjs/toolkit";
const topicSlice = createSlice({
name: 'topics',
initialState: {
  topics: {
    // Will eventually hold all topics keyed by id
  }
},
reducers: {
  addTopic: (state, action) => {
    state.topics[action.payload.id] = {
      id: action.payload.id,
      name: action.payload.name,
      icon: action.payload.icon,
    }
  }
}
})
```

6e. Each topic object added to the state should also have a quizIds property, which will correspond to an array containing the ids of each quiz associated with the topic. When a topic is first created, it won’t have any associated quizzes, but you should still create an empty quizIds array so that all topics in the state conform to the same shape.
```javascript
import { createSlice } from "@reduxjs/toolkit";
const topicSlice = createSlice({
name: 'topics',
initialState: {
  topics: {
    // Will eventually hold all topics keyed by id
  }
},
reducers: {
  addTopic: (state, action) => {
    // topics keyed by id
    state.topics[action.payload.id] = {
      id: action.payload.id,
      name: action.payload.name,
      icon: action.payload.icon,
      quizIDs: [],
    }
  }
}
})
```

6f. Create a selector that selects the topics object nested within initialState.
```javascript
const selectTopics = (state) => state.topics.topics
```
6e. Export the selector as well as the action creators and reducer that your slice generates.
```javascript
export const topicSlice = createSlice({
...
})

export const selectTopics = (state) => state.topics.topics;
export const topicsReducer = topicSlice.reducer;
```

### 7. Add topics to the app’s store.
7a. Import the reducer generated by your topics slice in src/app/store.js
```javascript
import { topicsReducer } from "../features/topics/topicSlice";
```

7b. add it to the empty object passed to configureStore under the key topics.
```javascript
import { configureStore } from "@reduxjs/toolkit";
import {topicsReducer } from "../features/topics/topicSlice";

export default configureStore({
reducer: {
  topics: topicsReducer,
},
});
```

### 8. In src/features/topics/Topics.js,
8a.  import the selector defined in your slice
```javascript
import { selectTopics } from "./topicSlice";
```

8b. Use it to access all the topics in state
```javascript
import { useSelector } from 'react-redux';
```

8c. Replace the empty object currently assigned to topics with the topics in state.
```javascript
import { selectTopics } from "../features/topics/topicSlice";
// assigned to topics with topics in state
// need to import useSelector and then call it in conjunction with our selector to access all the topics in state.
const topics = useSelector(selectTopics)

```

### 9. Hook the new topic form up to the action creators our slice generates. 
In src/components/NewTopicForm.js, 

9a. Import addTopic 
Inside topicSlice.js
```javascript
export const { addTopic } = topicSlice.actions;
```

Then import addTopic into NewTopicForm.js
```javascript
import { addTopic } from '../features/topics/topicSlice';
```

9b. dispatch it from the event handler that runs when the new topic form is submitted.

Hint: You will need to import and call the useDispatch() method in order to dispatch actions to the store.
```javascript
import { dispatch } from 'react-redux';

export default function NewTopicForm() {
  const dispatch = useDispatch();
  ...
}
```

9c. Include the topic’s name in the action payload as well as an id property (generate a value for this property by calling uuidv4()) and an icon property.
```javascript
  const handleSubmit = (e) => {
    ...
    dispatch(addTopic( {id: uuidv4(), name: name, icon: icon } ))
    // dispatch your add topic action here
    history.push(ROUTES.topicsRoute());
  };
```

Checkpoint: Verify that the code is working by filling out the form and submitting it. It should  redirect to the http://localhost:3000/topics page and a newly created topic should be there.


### 10. Build out the necessary functionality to add quizzes to our app. This will involve creating two new slices—one for the quizzes themselves and one for the cards that comprise them—and adding an action to your topics slice to associate quizzes with the topic to which they belong. To start, 

10a. Create in the src/features/quizzes directory, create a new file containing a slice for quizzes that is named "quizzes".

Create a new file in src/features/quizzes called quizzesSlice.js
```javascript
import { createSlice } from "@reduxjs/toolkit";

export const quizzesSlice = createSlice({
  name: 'quizzes',
})
```

10b. Has initial state consisting of an object that includes one property, quizzes, which corresponds to an empty object. This inner quizzes object will eventually hold all quizzes keyed by id.
```javascript
import { createSlice } from "@reduxjs/toolkit";

export const quizzesSlice = createSlice({
  name: 'quizzes',
  initialState: {
    // This inner quizzes object will eventually hold all quizzes keyed by id.
    quizzes: {}
  },
})
```

10c. Has an addQuiz action. This action will receive a payload of the form { id: '123', name: 'quiz name', topicId: '456', cardIds: ['1', '2', '3', ...]}.
```javascript
import { createSlice } from "@reduxjs/toolkit";

const quizzesSlice = createSlice({
  name: 'quizzes',
  initialState: {
    // This inner quizzes object will eventually hold all quizzes keyed by id.
    quizzes: {},
  },
  reducers: {
    addQuiz: (state, action) => {
      // Remember, we want the quizzes object to be keyed by quiz id, so insert your newly created quiz object as the value associated with the id you receive in the action’s payload.
      state.quizzes[action.payload.id] = {
        id: action.payload.id,
        name: action.payload.name,
        topicId: action.payload.topicId,
        cardIds: action.payload.cardIds,
      }
    }
  }
})
```

10d. Export the selector as well as the action creators and reducer that your slice generates.
```javascript
// In quizzesSlice.js
export const selectQuizzes = (state) => state.quizzes.quizzes;
export const quizzesReducer = quizzesSlice.reducer;
export const { addQuiz } = quizzesSlice.actions;
```

11a. Add an action to your topics slice
```javascript
export const topicSlice = createSlice({
  name: 'topics',
  initialState: {topics: {}},
  reducers: {
    addTopic: (state, action) => {
      ...
    },
    anActionToTopicSlice: (state, action) => {
      // Do something...
    }
  }
})
```

11b. Adds a quiz’s id to the quizIds array
From Hint: push the payload’s quizId into that topic’s quizIds array.
```javascript
export const topicSlice = createSlice({
  name: 'topics',
  initialState: {topics: {}},
  reducers: {
    addTopic: (state, action) => {
      ...
    },
    anActionToTopicSlice: (state, action) => {
      // From Hint: push the payload’s quizId into that topic’s quizIds array.
      quizIds.push(action.payload.id)
    }
  }
})
```

11c. From Hint: Use the payload’s topicId to find the correct topic in state.

Add a quiz'd id to the quizIds array (of the topic with which the newly quiz is associated). 

```javascript
export const topicSlice = createSlice({
  name: 'topics',
  initialState: {topics: {}},
  reducers: {
    addTopic: (state, action) => {
      ...
    },
    anActionToTopicSlice: (state, action) => {
      // From Hint: push the payload’s quizId into that topic’s quizIds array.
      state.topics quizIds.push(action.payload.id)
    }
  }
})
```

11d. This action action will receive a payload of the form {quizId: '123', topicId: '456'}. 

Hint: Use the payload’s topicId to find the correct topic in state, and push the payload’s quizId into that topic’s quizIds array.

My Hint: Look at 
```javascript
  topics: {
    // Will eventually hold all topics keyed by id
  }
```

```javascript
export const topicSlice = createSlice({
  name: 'topics',
  initialState: {topics: {}},
  reducers: {
    addTopic: (state, action) => {
      ...
    },
    anActionToTopicSlice: (state, action) => {
      // Hint: Use the payload’s topicId to find the correct topic in state, 
      state.topics[action.payload.topicId].quizIds.push(action.payload.id)
    }
  }
})
```

11f. Rename anActionToTopicSlice to appropriate action creator name. 
```javascript
export const topicSlice = createSlice({
  name: 'topics',
  initialState: {topics: {}},
  reducers: {
    addTopic: (state, action) => {
      ...
    },
    addQuizIdtoTopicId: (state, action) => {
      // Hint: Use the payload’s topicId to find the correct topic in state, 
      state.topics[action.payload.topicId].quizIds.push(action.payload.id)
    }
  }
})
```

11e. Make sure to export this action creator for use elsewhere in the app.
```javascript
export const { addTopic, addQuizIdToTopicId } = topicSlice.actions;
```

### 12. Conceptually, the actions of creating a new quiz and associating it with its topic are a part of a single process. 

12a. Back in the quiz slice file, write an action creator that returns a thunk that dispatches these two actions one after the other.

Remember, thunks take the form:
```javascript
export const thunkActionCreator = (payload) => {
    return (dispatch) => {
      // dispatch multiple actions here
    };
};
```


And your action creator will receive a payload of the form

This new thunk action creator is the one that you will dispatch when a user creates a new quiz.
```javascript
{
  name: 'name of quiz',
  topicId: '123',
  cardIds: ['4', '5', '6'],
  id: '789',
}
```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```

```javascript

```















# To Run

# State

The app's state is totally normalized, with slices for topics, quizzes, and cards.

# Routes

- `/new-topic` – form to create a new topic
- `/topics` – index of all topics
- `/topics/:topicId` – page for an individual topic
- `/new-quiz` – form to create a new quiz
- `/quizzes` – index of all quizzes
- `/quizzes/:quizId` – page for an individual quiz

# To Test

1. Create topics
2. Create quizzes
3. Visit the page for an individual quiz and flip the cards over

# Questions

Is this appropriately scoped? Does it have too many features? Too few?
